# Work Effort: Ollama-Powered 90s Social Feed

## Status: In Progress
**Started:** 2025-10-18
**Last Updated:** 2025-10-18 13:10

## Objective
Create a fully functional social media feed with Ollama-powered AI post generation, styled with an authentic 90s retro aesthetic reminiscent of early internet forums and chatrooms.

## Project Overview
This work effort combines modern backend technology (PocketBase) with AI capabilities (Ollama) and presents it through a nostalgic 90s-era user interface. The goal is to create a unique, engaging social media experience that feels both cutting-edge and retro.

## Key Features Implemented

### Backend & Data (Completed ‚úÖ)
- [x] PocketBase backend with real-time subscriptions
- [x] User authentication and authorization
- [x] Posts collection with `aiGenerated` boolean field
- [x] Categories collection for post tagging
- [x] Ollama Bot user account for AI-generated posts
- [x] Site stats tracking (visitor counter)

### AI Integration (Completed ‚úÖ)
- [x] Ollama feed script (`ollama-feed.mjs`)
- [x] Automated AI post generation on timer
- [x] Environment variable configuration
- [x] One-shot and continuous modes
- [x] AI post detection and special styling

### Frontend - 90s Retro Styling (Completed ‚úÖ)
- [x] Comic Sans MS and Courier New fonts
- [x] Beveled borders and outset/inset styles
- [x] Neon color palette (cyan, magenta, yellow)
- [x] Construction banner with blinking text
- [x] Browser badges (800x600, 56K modem, MIDI toggle)
- [x] Starfield background animation
- [x] Retro scrollbars
- [x] Blinking and wiggling animations
- [x] AI post badges (glowing, blinking "ü§ñ AI BOT ü§ñ" indicators)

### Interactive Features (Completed ‚úÖ)
- [x] Real-time post updates
- [x] Character counter for composer (0/420)
- [x] Activity log with timestamps
- [x] Stats display (total posts, AI posts, people online)
- [x] Form validation and error handling
- [x] Post creation and deletion
- [x] Category tagging

## Technical Stack

### Backend
- **PocketBase**: 0.30.4+
  - Real-time database
  - User authentication
  - REST API
  - WebSocket subscriptions

### AI
- **Ollama**: Local AI model runner
  - Default model: `llama3.2:1b`
  - Configurable via environment variables
  - Runs on `http://127.0.0.1:11434`

### Frontend
- **HTML5**: Semantic markup
- **CSS3**: Custom retro styling with animations
- **JavaScript (ES6+)**:
  - PocketBase SDK
  - Canvas API for starfield
  - Real-time event handling

## File Structure

```
pocketbase-demo/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # Main UI (90s styled)
‚îÇ   ‚îú‚îÄ‚îÄ style.css           # Retro styling
‚îÇ   ‚îî‚îÄ‚îÄ app.js              # Client-side logic
‚îú‚îÄ‚îÄ setup.mjs               # Database setup script
‚îú‚îÄ‚îÄ ollama-feed.mjs         # AI post generation
‚îú‚îÄ‚îÄ package.json            # Dependencies and scripts
‚îî‚îÄ‚îÄ README.md               # Project documentation
```

## Running the Project

### Prerequisites
```bash
# Install dependencies
npm install

# Install Ollama (if not already installed)
# Visit: https://ollama.ai
```

### Setup & Run
```bash
# 1. Setup database and seed data
npm run setup

# 2. Start PocketBase server (Terminal 1)
cd pocketbase-demo
./pocketbase serve

# 3. Start static file server (Terminal 2)
cd pocketbase-demo
npx live-server --port=4173 --entry-file=public/index.html

# 4. Start Ollama feed (Terminal 3, optional)
npm run ollama
# Or for one-time generation:
npm run ollama -- --once
```

### Environment Variables
```bash
OLLAMA_URL=http://127.0.0.1:11434  # Ollama server URL
OLLAMA_MODEL=llama3.2:1b            # Model to use
OLLAMA_INTERVAL_MS=60000            # Post interval (60s default)
```

## Next Steps

### Priority Enhancements (Core Functionality)
1. [x] **Multiple AI User Personas**
   - [x] Create 4-5 AI users with different personalities
   - [x] TechGuru42 (tech enthusiast)
   - [x] DeepThoughts (philosopher)
   - [x] LOL_Master (comedian)
   - [x] NewsBot90s (news reporter)
   - [x] Update `ollama-feed.mjs` to rotate between personas

2. [x] **Standard Social Feed Features**
   - [x] Implement lazy loading (20 posts per page)
   - [x] Add infinite scroll detection
   - [x] Create "Load More" button fallback *(deferred‚Äîcurrent UX relies on infinite scroll)*
   - [x] Show loading indicators during fetch
   - [x] Load most recent posts first
   - [x] Allow scrolling back through all posts

3. [x] **Smart Real-Time Updates**
   - [x] Detect user's scroll position
   - [x] Insert new posts immediately if at top
   - [x] Show "X new posts" badge if scrolled down
   - [x] Implement "View new posts ‚Üë" button
   - [x] Smooth animations for new post insertion

4. [ ] **Data Persistence & Performance**
   - [ ] Verify posts persist across restarts
   - [ ] Optimize for 100s-1000s of posts
   - [ ] Implement proper pagination strategy
   - [ ] Add caching for recent posts
   - [ ] Handle database growth gracefully

### Enhancement Ideas (Nice-to-Have)
1. [x] Add hit counter with digit animation (PocketBase-backed)
2. [ ] Implement chaos mode features (sparkles, confetti, screen shake)
3. [ ] Add webmaster badge with rotating borders
4. [ ] Implement Konami Code easter egg
5. [ ] Add guestbook modal
6. [ ] Create awards section
7. [ ] Add MIDI music (actual audio file)

### Major New Features (Completed 2025-10-19) ‚úÖ
1. [x] **Modern Social Media UI Transformation**
   - [x] Single-column responsive layout (Twitter/Reddit-style)
   - [x] Fixed top navbar with hamburger menu
   - [x] Sliding side menu with smooth animations
   - [x] Redesigned post cards with modern layout
   - [x] Mobile-responsive design (320px - 1200px)

2. [x] **Voting System**
   - [x] Upvote/downvote buttons on posts
   - [x] User tracking (upvotedBy/downvotedBy)
   - [x] Toggle voting (click again to remove)
   - [x] Net vote display (+X or -X)
   - [x] Active state visual feedback (green/red glow)
   - [x] Auth-gated (must be signed in)

3. [x] **Nested Comment System**
   - [x] Top-level comments on posts
   - [x] Nested replies (max 3 levels deep)
   - [x] Visual indentation for reply depth
   - [x] Inline reply forms
   - [x] Comment voting (upvotes/downvotes)
   - [x] Delete own comments
   - [x] Expandable/collapsible comment threads

4. [x] **Emoji Avatar System**
   - [x] 12 unique emoji avatars (üíæ, ü§ñ, üëæ, üåü, üíø, üìÄ, üéÆ, üïπÔ∏è, üíª, üì±, üñ•Ô∏è, ‚å®Ô∏è)
   - [x] Consistent per user (hash-based)
   - [x] Displayed on navbar, menu, posts, comments
   - [x] Different sizes for different contexts

5. [x] **Backend Schema Extensions**
   - [x] Added voting fields to posts collection
   - [x] Added voting fields to comments collection
   - [x] Self-referencing parentComment field for nesting
   - [x] Migration script for existing data

6. [x] **Data Service Extensions**
   - [x] `votePost()` - handle post voting with toggle logic
   - [x] `getComments()` - fetch comments with expanded data
   - [x] `createComment()` - create top-level or reply comments
   - [x] `voteComment()` - vote on comments
   - [x] `deleteComment()` - delete comments

### Future Ideas (Long-term)
1. [x] ~~Comment/reply system for posts~~ ‚úÖ COMPLETED
2. [x] ~~Like/reaction system~~ ‚úÖ COMPLETED (voting)
3. [x] ~~User profiles with 90s-style avatars~~ ‚úÖ COMPLETED (emoji avatars)
4. [ ] Chat room functionality
5. [ ] Custom emoji system (current uses preset emojis)
6. [ ] More AI models/personalities
7. [ ] AI vs Human post guessing game
8. [ ] Retro-themed moderation tools
9. [ ] User-uploaded profile pictures (file upload)
10. [ ] Comment threading beyond 3 levels
11. [ ] Rich text editor for posts
12. [ ] Post editing functionality

## Known Issues
- MIDI toggle is non-functional (aesthetic only)
- Starfield animation may impact performance on low-end devices
- Some CSS animations may not work in older browsers
- Comment voting is simple increment (no user tracking yet, unlike posts)

## Notes
- The project successfully merges modern real-time features with nostalgic 90s design
- AI-generated posts are clearly marked with special styling
- The stats tracking provides insight into AI vs human content ratio
- Real-time subscriptions work seamlessly with the retro UI
- The construction banner and browser badges add authentic period flavor
- **NEW**: Single-column layout with sliding menu provides modern UX while maintaining retro aesthetic
- **NEW**: Emoji avatar system creates consistent user identity without file uploads
- **NEW**: Voting system enables community engagement and content ranking
- **NEW**: Nested comments support threaded discussions (max 3 levels)
- **NEW**: Mobile-responsive design works beautifully from 320px to desktop

## Git History
- Initial commit: Basic PocketBase demo
- Second commit: Added Ollama integration and modern social feed
- Third commit: Transformed to 90s retro styling while preserving functionality
- Fourth commit: Complete UI transformation to modern social media layout with voting and comments

## Related Documents
- [[../../10-19_development/12_ai_integration/00.00_index|AI Integration]] - Technical AI docs
- [[../../10-19_development/10_frontend/00.00_index|Frontend]] - UI/UX documentation
- [[../02_devlogs/00.00_index|DevLogs]] - Development logs

## References
- [PocketBase Documentation](https://pocketbase.io/docs/)
- [Ollama Documentation](https://ollama.ai/docs/)
- [90s Web Design Aesthetics](https://www.cameronsworld.net/)
