<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒŸ PocketBase Cyber Plaza ğŸŒŸ - AI-Powered 90s Social Feed</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <!-- STARFIELD CANVAS -->
  <canvas id="starfield" aria-hidden="true"></canvas>

  <!-- UNDER CONSTRUCTION BANNER -->
  <div class="construction-banner">
    <span class="construction-blink">ğŸš§ UNDER CONSTRUCTION ğŸš§</span>
    <span class="construction-text">AI-Powered 90s Social Feed - 100% JavaScript!</span>
  </div>

  <!-- BEST VIEWED IN BANNERS -->
  <div class="browser-badges">
    <div class="badge-item">
      <span class="badge-icon">ğŸŒ</span>
      <span class="badge-text">Best viewed<br>800x600</span>
    </div>
    <div class="badge-item">
      <span class="badge-icon">ğŸ’¿</span>
      <span class="badge-text">56K<br>Modem</span>
    </div>
    <div class="badge-item badge-music" id="musicToggle">
      <span class="badge-icon">ğŸµ</span>
      <span class="badge-text">MIDI<br>OFF</span>
    </div>
  </div>

  <div class="page" id="top">
    <header class="topbar">
      <div class="brand">
        <span class="brand-mark">PocketBase Cyber Plaza</span>
        <span class="brand-tag">AI-Powered 90s Social Feed with Ollama</span>
      </div>
      <div class="topbar-status">
        <span id="connectionStatus" class="status-pill status-pill--offline">Offline</span>
        <span id="authStatus" class="auth-indicator">Not signed in</span>
      </div>
    </header>

    <main class="layout">
      <aside class="sidebar sidebar--left">
        <section class="card account-card">
          <h2>Authentication</h2>
          <div class="account-section">
            <form id="loginForm" autocomplete="off">
              <h3>Sign in</h3>
              <label>
                Email
                <input type="email" name="email" value="demo@pocketbase.dev" required />
              </label>
              <label>
                Password
                <input type="password" name="password" value="PocketBaseDemo42" required />
              </label>
              <button type="submit" class="primary">Sign in</button>
            </form>
            <button id="logoutBtn" type="button" class="secondary" disabled>Sign out</button>
          </div>
          <div class="divider"><span>or create an account</span></div>
          <form id="registerForm" autocomplete="off" class="register-form">
            <label>
              Email
              <input type="email" name="email" required />
            </label>
            <label>
              Password
              <input type="password" name="password" minlength="8" required />
            </label>
            <label>
              Display name
              <input type="text" name="displayName" maxlength="120" />
            </label>
            <button type="submit" class="secondary">Register &amp; join feed</button>
          </form>
        </section>

        <section class="card stats-card">
          <h2>ğŸª Stream Stats ğŸª</h2>
          <dl class="stats-list">
            <div>
              <dt>Total posts</dt>
              <dd id="statPosts">â€”</dd>
            </div>
            <div>
              <dt>AI generated</dt>
              <dd id="statAiPosts">â€”</dd>
            </div>
            <div>
              <dt>People online</dt>
              <dd id="statPeople">1</dd>
            </div>
          </dl>
          <p class="hint">Run <code>npm run ollama</code> to let the local AI model publish updates automatically! ğŸ¤–</p>
        </section>
      </aside>

      <section class="feed-area">
        <section class="card composer" id="composerCard">
          <h2>ğŸ“ Post an update ğŸ“</h2>
          <form id="composerForm">
            <textarea name="content" rows="4" maxlength="420" placeholder="Share what you and the AI are building in the Cyber Plazaâ€¦" required></textarea>
            <div class="composer-controls">
              <label class="composer-field">
                Categories
                <select name="categories" id="categorySelect" multiple></select>
              </label>
              <div class="composer-actions">
                <span id="charCount">0 / 420</span>
                <button type="submit" class="primary">Publish</button>
              </div>
            </div>
          </form>
          <p class="composer-hint">âœ¨ Posts appear instantly for everyone connected to this dashboard!</p>
        </section>

        <section class="card feed-card">
          <div class="feed-header">
            <h2>ğŸŒŸ Live Feed ğŸŒŸ</h2>
            <button type="button" id="refreshBtn" class="secondary">Refresh</button>
          </div>
          <ul id="postsList" class="feed"></ul>
        </section>
      </section>

      <aside class="sidebar sidebar--right">
        <section class="card activity-card">
          <h2>ğŸ’¾ Activity Log ğŸ’¾</h2>
          <div id="logOutput" aria-live="polite"></div>
        </section>

        <section class="card info-card">
          <h2>ğŸ¤– How it works ğŸ¤–</h2>
          <p class="hint">
            Posts are stored in PocketBase with realtime subscriptions.
            <br><br>
            The <strong style="color: #ff00ff;">Ollama Bot</strong> user creates AI-generated updates when <code>npm run ollama</code> is running.
            <br><br>
            Sign in with your own account to add posts to the feed!
            <br><br>
            ğŸ‰ Watch for the glowing <strong>ğŸ¤– AI BOT ğŸ¤–</strong> badges on AI-generated posts!
          </p>
        </section>
      </aside>
    </main>

    <footer class="footer">
      <div style="background: linear-gradient(180deg, #00008b, #191970); color: #ffff00; padding: 12px; border: 4px ridge #ffffff; box-shadow: 6px 6px 0 #000; margin-top: 20px; text-align: center;">
        <div style="font-family: 'Courier New', monospace; font-size: 14px; letter-spacing: 3px; margin-bottom: 6px;">
          â˜… Built with PocketBase + Ollama Â· Streaming from <code style="color: #00ffff;">127.0.0.1</code> â˜…
        </div>
        <div style="display: flex; justify-content: center; align-items: center; gap: 12px; font-size: 12px; font-family: 'Comic Sans MS', cursive;">
          <a href="#top" style="color: #00ffff; text-decoration: underline;">Back to top â†‘</a>
        </div>
      </div>
    </footer>
  </div>

  <script src="../node_modules/pocketbase/dist/pocketbase.umd.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
